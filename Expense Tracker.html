<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expense Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family: Arial; background:#f4f4f4; text-align:center; }
  .container { max-width:500px; margin:50px auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
  input, select, button { width:90%; padding:10px; margin:5px 0; border-radius:6px; border:1px solid #ccc; }
  ul { list-style:none; padding:0; }
  li { padding:8px; border-bottom:1px solid #ddd; text-align:left; display:flex; justify-content:space-between; }
</style>
</head>
<body>
<div class="container">
  <h2>ðŸ’° Expense Tracker</h2>
  <input type="text" id="desc" placeholder="Description">
  <input type="number" id="amount" placeholder="Amount">
  <select id="category">
    <option value="Food">Food</option>
    <option value="Transport">Transport</option>
    <option value="Entertainment">Entertainment</option>
    <option value="Others">Others</option>
  </select>
  <button onclick="addExpense()">Add Expense</button>
  
  <h3>Total: $<span id="total">0</span></h3>
  <ul id="expenseList"></ul>
  
  <canvas id="expenseChart" width="400" height="400"></canvas>
</div>

<script>
let expenses = JSON.parse(localStorage.getItem('expenses') || '[]');

function addExpense() {
  const desc = document.getElementById('desc').value;
  const amount = parseFloat(document.getElementById('amount').value);
  const category = document.getElementById('category').value;

  if(!desc || !amount) return alert('Please fill all fields!');
  
  expenses.push({desc, amount, category});
  localStorage.setItem('expenses', JSON.stringify(expenses));
  
  document.getElementById('desc').value = '';
  document.getElementById('amount').value = '';
  
  renderExpenses();
  renderChart();
}

function deleteExpense(index) {
  expenses.splice(index, 1);
  localStorage.setItem('expenses', JSON.stringify(expenses));
  renderExpenses();
  renderChart();
}

function renderExpenses() {
  const list = document.getElementById('expenseList');
  list.innerHTML = '';
  let total = 0;
  
  expenses.forEach((exp, i) => {
    total += exp.amount;
    const li = document.createElement('li');
    li.innerHTML = `${exp.desc} - $${exp.amount} (${exp.category}) 
      <button onclick="deleteExpense(${i})">Delete</button>`;
    list.appendChild(li);
  });
  
  document.getElementById('total').innerText = total.toFixed(2);
}

function renderChart() {
  const ctx = document.getElementById('expenseChart').getContext('2d');
  const categories = {};
  expenses.forEach(e => categories[e.category] = (categories[e.category] || 0) + e.amount);
  
  const data = {
    labels: Object.keys(categories),
    datasets: [{
      label: 'Expenses by Category',
      data: Object.values(categories),
      backgroundColor: ['#ff6384','#36a2eb','#ffce56','#4bc0c0']
    }]
  };
  
  if(window.myChart) window.myChart.destroy();
  window.myChart = new Chart(ctx, { type:'pie', data });
}


renderExpenses();
renderChart();
</script>
</body>
</html>
